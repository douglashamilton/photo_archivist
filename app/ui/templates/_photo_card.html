{% macro photo_card(photo, index) %}
<div class="photo-card group relative" id="photo-{{ index }}">
    <img src="{{ photo.thumb_url }}" alt="Photo {{ index + 1 }}" class="w-full h-full object-cover"
         loading="lazy" decoding="async">
    
    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity"></div>
    
    <div class="absolute top-2 right-2 flex space-x-2">
        <span class="score-badge">{{ "%.0f"|format(photo.final_score * 100) }}%</span>
    </div>

    <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
        <div class="flex justify-between items-center text-white">
            <div class="flex flex-wrap gap-1">
                {% for reason in photo.reasons %}
                <span class="text-xs bg-white/20 px-2 py-1 rounded">{{ reason }}</span>
                {% endfor %}
            </div>
            
            {% if not photo.selected %}
            <button class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm"
                    hx-post="/api/shortlists/{{ shortlist_id }}/select"
                    hx-vals='{"itemId": "{{ photo.item_id }}", "selected": true}'
                    hx-target="#photo-grid"
                    hx-swap="innerHTML">
                Add
            </button>
            {% else %}
            <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm"
                    hx-post="/api/shortlists/{{ shortlist_id }}/select"
                    hx-vals='{"itemId": "{{ photo.item_id }}", "selected": false}'
                    hx-target="#photo-grid"
                    hx-swap="innerHTML">
                Remove
            </button>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}